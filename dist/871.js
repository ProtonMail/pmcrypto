/*! For license information please see 871.js.LICENSE.txt */
"use strict";(self.webpackChunkpmcrypto=self.webpackChunkpmcrypto||[]).push([[871],{871:(t,e,r)=>{r.r(e),r.d(e,{createReadableStreamWrapper:()=>l,createTransformStreamWrapper:()=>W,createWrappingReadableSource:()=>_,createWrappingTransformer:()=>S,createWrappingWritableSink:()=>m,createWritableStreamWrapper:()=>R});var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function o(t){if(!t)throw new TypeError("Assertion failed")}function a(){}function s(t){return"object"==typeof t&&null!==t||"function"==typeof t}function u(t){if("function"!=typeof t)return!1;var e=!1;try{new t({start:function(){e=!0}})}catch(t){}return e}function c(t){return!!s(t)&&"function"==typeof t.getReader}function d(t){return!!s(t)&&"function"==typeof t.getWriter}function h(t){return!!s(t)&&!!c(t.readable)&&!!d(t.writable)}function f(t){try{return t.getReader({mode:"byob"}).releaseLock(),!0}catch(t){return!1}}function l(t){o(function(t){return!!u(t)&&!!c(new t)}(t));var e=function(t){try{return new t({type:"bytes"}),!0}catch(t){return!1}}(t);return function(r,n){var i=(void 0===n?{}:n).type;if("bytes"!==(i=p(i))||e||(i=void 0),r.constructor===t&&("bytes"!==i||f(r)))return r;if("bytes"===i){var o=_(r,{type:i});return new t(o)}return o=_(r),new t(o)}}function _(t,e){var r=(void 0===e?{}:e).type;return o(c(t)),o(!1===t.locked),"bytes"===(r=p(r))?new b(t):new v(t)}function p(t){var e=String(t);if("bytes"===e)return e;if(void 0===t)return t;throw new RangeError("Invalid type is specified")}var y=function(){function t(t){this._underlyingReader=void 0,this._readerMode=void 0,this._readableStreamController=void 0,this._pendingRead=void 0,this._underlyingStream=t,this._attachDefaultReader()}return t.prototype.start=function(t){this._readableStreamController=t},t.prototype.cancel=function(t){return o(void 0!==this._underlyingReader),this._underlyingReader.cancel(t)},t.prototype._attachDefaultReader=function(){if("default"!==this._readerMode){this._detachReader();var t=this._underlyingStream.getReader();this._readerMode="default",this._attachReader(t)}},t.prototype._attachReader=function(t){var e=this;o(void 0===this._underlyingReader),this._underlyingReader=t;var r=this._underlyingReader.closed;r&&r.then((function(){return e._finishPendingRead()})).then((function(){t===e._underlyingReader&&e._readableStreamController.close()}),(function(r){t===e._underlyingReader&&e._readableStreamController.error(r)})).catch(a)},t.prototype._detachReader=function(){void 0!==this._underlyingReader&&(this._underlyingReader.releaseLock(),this._underlyingReader=void 0,this._readerMode=void 0)},t.prototype._pullWithDefaultReader=function(){var t=this;this._attachDefaultReader();var e=this._underlyingReader.read().then((function(e){var r=t._readableStreamController;e.done?t._tryClose():r.enqueue(e.value)}));return this._setPendingRead(e),e},t.prototype._tryClose=function(){try{this._readableStreamController.close()}catch(t){}},t.prototype._setPendingRead=function(t){var e,r=this,n=function(){r._pendingRead===e&&(r._pendingRead=void 0)};this._pendingRead=e=t.then(n,n)},t.prototype._finishPendingRead=function(){var t=this;if(this._pendingRead){var e=function(){return t._finishPendingRead()};return this._pendingRead.then(e,e)}},t}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.pull=function(){return this._pullWithDefaultReader()},e}(y);function g(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}var b=function(t){function e(e){var r=this,n=f(e);return(r=t.call(this,e)||this)._supportsByob=n,r}return i(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return"bytes"},enumerable:!1,configurable:!0}),e.prototype._attachByobReader=function(){if("byob"!==this._readerMode){o(this._supportsByob),this._detachReader();var t=this._underlyingStream.getReader({mode:"byob"});this._readerMode="byob",this._attachReader(t)}},e.prototype.pull=function(){if(this._supportsByob){var t=this._readableStreamController.byobRequest;if(t)return this._pullWithByobRequest(t)}return this._pullWithDefaultReader()},e.prototype._pullWithByobRequest=function(t){var e=this;this._attachByobReader();var r=new Uint8Array(t.view.byteLength),n=this._underlyingReader.read(r).then((function(r){var n,i,o;e._readableStreamController,r.done?(e._tryClose(),t.respond(0)):(n=r.value,i=t.view,o=g(n),g(i).set(o,0),t.respond(r.value.byteLength))}));return this._setPendingRead(n),n},e}(y);function R(t){return o(function(t){return!!u(t)&&!!d(new t)}(t)),function(e){if(e.constructor===t)return e;var r=m(e);return new t(r)}}function m(t){o(d(t)),o(!1===t.locked);var e=t.getWriter();return new w(e)}var w=function(){function t(t){var e=this;this._writableStreamController=void 0,this._pendingWrite=void 0,this._state="writable",this._storedError=void 0,this._underlyingWriter=t,this._errorPromise=new Promise((function(t,r){e._errorPromiseReject=r})),this._errorPromise.catch(a)}return t.prototype.start=function(t){var e=this;this._writableStreamController=t,this._underlyingWriter.closed.then((function(){e._state="closed"})).catch((function(t){return e._finishErroring(t)}))},t.prototype.write=function(t){var e=this,r=this._underlyingWriter;if(null===r.desiredSize)return r.ready;var n=r.write(t);n.catch((function(t){return e._finishErroring(t)})),r.ready.catch((function(t){return e._startErroring(t)}));var i=Promise.race([n,this._errorPromise]);return this._setPendingWrite(i),i},t.prototype.close=function(){var t=this;return void 0===this._pendingWrite?this._underlyingWriter.close():this._finishPendingWrite().then((function(){return t.close()}))},t.prototype.abort=function(t){if("errored"!==this._state)return this._underlyingWriter.abort(t)},t.prototype._setPendingWrite=function(t){var e,r=this,n=function(){r._pendingWrite===e&&(r._pendingWrite=void 0)};this._pendingWrite=e=t.then(n,n)},t.prototype._finishPendingWrite=function(){var t=this;if(void 0===this._pendingWrite)return Promise.resolve();var e=function(){return t._finishPendingWrite()};return this._pendingWrite.then(e,e)},t.prototype._startErroring=function(t){var e=this;if("writable"===this._state){this._state="erroring",this._storedError=t;var r=function(){return e._finishErroring(t)};void 0===this._pendingWrite?r():this._finishPendingWrite().then(r,r),this._writableStreamController.error(t)}},t.prototype._finishErroring=function(t){"writable"===this._state&&this._startErroring(t),"erroring"===this._state&&(this._state="errored",this._errorPromiseReject(this._storedError))},t}();function W(t){return o(function(t){return!!u(t)&&!!h(new t)}(t)),function(e){if(e.constructor===t)return e;var r=S(e);return new t(r)}}function S(t){o(h(t));var e=t.readable,r=t.writable;o(!1===e.locked),o(!1===r.locked);var n,i=e.getReader();try{n=r.getWriter()}catch(t){throw i.releaseLock(),t}return new P(i,n)}var P=function(){function t(t,e){var r=this;this._transformStreamController=void 0,this._onRead=function(t){if(!t.done)return r._transformStreamController.enqueue(t.value),r._reader.read().then(r._onRead)},this._onError=function(t){r._flushReject(t),r._transformStreamController.error(t),r._reader.cancel(t).catch(a),r._writer.abort(t).catch(a)},this._onTerminate=function(){r._flushResolve(),r._transformStreamController.terminate();var t=new TypeError("TransformStream terminated");r._writer.abort(t).catch(a)},this._reader=t,this._writer=e,this._flushPromise=new Promise((function(t,e){r._flushResolve=t,r._flushReject=e}))}return t.prototype.start=function(t){this._transformStreamController=t,this._reader.read().then(this._onRead).then(this._onTerminate,this._onError);var e=this._reader.closed;e&&e.then(this._onTerminate,this._onError)},t.prototype.transform=function(t){return this._writer.write(t)},t.prototype.flush=function(){var t=this;return this._writer.close().then((function(){return t._flushPromise}))},t}()}}]);
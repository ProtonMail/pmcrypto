/*! For license information please see worker.chunk.node_modules_openpgp_dist_lightweight_web-streams-adapter_min_mjs.js.LICENSE.txt */
"use strict";(self.webpackChunkpmcrypto=self.webpackChunkpmcrypto||[]).push([["node_modules_openpgp_dist_lightweight_web-streams-adapter_min_mjs"],{31:(e,t,r)=>{r.r(t),r.d(t,{createReadableStreamWrapper:()=>l,createTransformStreamWrapper:()=>W,createWrappingReadableSource:()=>_,createWrappingTransformer:()=>P,createWrappingWritableSink:()=>m,createWritableStreamWrapper:()=>R}),"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+t+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e){if(!e)throw new TypeError("Assertion failed")}function a(){}function s(e){return"object"==typeof e&&null!==e||"function"==typeof e}function u(e){if("function"!=typeof e)return!1;var t=!1;try{new e({start:function(){t=!0}})}catch(e){}return t}function d(e){return!!s(e)&&"function"==typeof e.getReader}function c(e){return!!s(e)&&"function"==typeof e.getWriter}function h(e){return!!s(e)&&!!d(e.readable)&&!!c(e.writable)}function f(e){try{return e.getReader({mode:"byob"}).releaseLock(),!0}catch(e){return!1}}function l(e){o(function(e){return!!u(e)&&!!d(new e)}(e));var t=function(e){try{return new e({type:"bytes"}),!0}catch(e){return!1}}(e);return function(r,n){var i=(void 0===n?{}:n).type;if("bytes"!==(i=p(i))||t||(i=void 0),r.constructor===e&&("bytes"!==i||f(r)))return r;if("bytes"===i){var o=_(r,{type:i});return new e(o)}return o=_(r),new e(o)}}function _(e,t){var r=(void 0===t?{}:t).type;return o(d(e)),o(!1===e.locked),"bytes"===(r=p(r))?new b(e):new v(e)}function p(e){var t=e+"";if("bytes"===t)return t;if(void 0===e)return e;throw new RangeError("Invalid type is specified")}var y=function(){function e(e){this._underlyingReader=void 0,this._readerMode=void 0,this._readableStreamController=void 0,this._pendingRead=void 0,this._underlyingStream=e,this._attachDefaultReader()}return e.prototype.start=function(e){this._readableStreamController=e},e.prototype.cancel=function(e){return o(void 0!==this._underlyingReader),this._underlyingReader.cancel(e)},e.prototype._attachDefaultReader=function(){if("default"!==this._readerMode){this._detachReader();var e=this._underlyingStream.getReader();this._readerMode="default",this._attachReader(e)}},e.prototype._attachReader=function(e){var t=this;o(void 0===this._underlyingReader),this._underlyingReader=e;var r=this._underlyingReader.closed;r&&r.then((function(){return t._finishPendingRead()})).then((function(){e===t._underlyingReader&&t._readableStreamController.close()}),(function(r){e===t._underlyingReader&&t._readableStreamController.error(r)})).catch(a)},e.prototype._detachReader=function(){void 0!==this._underlyingReader&&(this._underlyingReader.releaseLock(),this._underlyingReader=void 0,this._readerMode=void 0)},e.prototype._pullWithDefaultReader=function(){var e=this;this._attachDefaultReader();var t=this._underlyingReader.read().then((function(t){var r=e._readableStreamController;t.done?e._tryClose():r.enqueue(t.value)}));return this._setPendingRead(t),t},e.prototype._tryClose=function(){try{this._readableStreamController.close()}catch(e){}},e.prototype._setPendingRead=function(e){var t,r=this,n=function(){r._pendingRead===t&&(r._pendingRead=void 0)};this._pendingRead=t=e.then(n,n)},e.prototype._finishPendingRead=function(){var e=this;if(this._pendingRead){var t=function(){return e._finishPendingRead()};return this._pendingRead.then(t,t)}},e}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.pull=function(){return this._pullWithDefaultReader()},t}(y);function g(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}var b=function(e){function t(t){var r=this,n=f(t);return(r=e.call(this,t)||this)._supportsByob=n,r}return i(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return"bytes"},enumerable:!1,configurable:!0}),t.prototype._attachByobReader=function(){if("byob"!==this._readerMode){o(this._supportsByob),this._detachReader();var e=this._underlyingStream.getReader({mode:"byob"});this._readerMode="byob",this._attachReader(e)}},t.prototype.pull=function(){if(this._supportsByob){var e=this._readableStreamController.byobRequest;if(e)return this._pullWithByobRequest(e)}return this._pullWithDefaultReader()},t.prototype._pullWithByobRequest=function(e){var t=this;this._attachByobReader();var r=new Uint8Array(e.view.byteLength),n=this._underlyingReader.read(r).then((function(r){var n,i,o;t._readableStreamController,r.done?(t._tryClose(),e.respond(0)):(n=r.value,i=e.view,o=g(n),g(i).set(o,0),e.respond(r.value.byteLength))}));return this._setPendingRead(n),n},t}(y);function R(e){return o(function(e){return!!u(e)&&!!c(new e)}(e)),function(t){if(t.constructor===e)return t;var r=m(t);return new e(r)}}function m(e){o(c(e)),o(!1===e.locked);var t=e.getWriter();return new w(t)}var w=function(){function e(e){var t=this;this._writableStreamController=void 0,this._pendingWrite=void 0,this._state="writable",this._storedError=void 0,this._underlyingWriter=e,this._errorPromise=new Promise((function(e,r){t._errorPromiseReject=r})),this._errorPromise.catch(a)}return e.prototype.start=function(e){var t=this;this._writableStreamController=e,this._underlyingWriter.closed.then((function(){t._state="closed"})).catch((function(e){return t._finishErroring(e)}))},e.prototype.write=function(e){var t=this,r=this._underlyingWriter;if(null===r.desiredSize)return r.ready;var n=r.write(e);n.catch((function(e){return t._finishErroring(e)})),r.ready.catch((function(e){return t._startErroring(e)}));var i=Promise.race([n,this._errorPromise]);return this._setPendingWrite(i),i},e.prototype.close=function(){var e=this;return void 0===this._pendingWrite?this._underlyingWriter.close():this._finishPendingWrite().then((function(){return e.close()}))},e.prototype.abort=function(e){if("errored"!==this._state)return this._underlyingWriter.abort(e)},e.prototype._setPendingWrite=function(e){var t,r=this,n=function(){r._pendingWrite===t&&(r._pendingWrite=void 0)};this._pendingWrite=t=e.then(n,n)},e.prototype._finishPendingWrite=function(){var e=this;if(void 0===this._pendingWrite)return Promise.resolve();var t=function(){return e._finishPendingWrite()};return this._pendingWrite.then(t,t)},e.prototype._startErroring=function(e){var t=this;if("writable"===this._state){this._state="erroring",this._storedError=e;var r=function(){return t._finishErroring(e)};void 0===this._pendingWrite?r():this._finishPendingWrite().then(r,r),this._writableStreamController.error(e)}},e.prototype._finishErroring=function(e){"writable"===this._state&&this._startErroring(e),"erroring"===this._state&&(this._state="errored",this._errorPromiseReject(this._storedError))},e}();function W(e){return o(function(e){return!!u(e)&&!!h(new e)}(e)),function(t){if(t.constructor===e)return t;var r=P(t);return new e(r)}}function P(e){o(h(e));var t=e.readable,r=e.writable;o(!1===t.locked),o(!1===r.locked);var n,i=t.getReader();try{n=r.getWriter()}catch(e){throw i.releaseLock(),e}return new S(i,n)}var S=function(){function e(e,t){var r=this;this._transformStreamController=void 0,this._onRead=function(e){if(!e.done)return r._transformStreamController.enqueue(e.value),r._reader.read().then(r._onRead)},this._onError=function(e){r._flushReject(e),r._transformStreamController.error(e),r._reader.cancel(e).catch(a),r._writer.abort(e).catch(a)},this._onTerminate=function(){r._flushResolve(),r._transformStreamController.terminate();var e=new TypeError("TransformStream terminated");r._writer.abort(e).catch(a)},this._reader=e,this._writer=t,this._flushPromise=new Promise((function(e,t){r._flushResolve=e,r._flushReject=t}))}return e.prototype.start=function(e){this._transformStreamController=e,this._reader.read().then(this._onRead).then(this._onTerminate,this._onError);var t=this._reader.closed;t&&t.then(this._onTerminate,this._onError)},e.prototype.transform=function(e){return this._writer.write(e)},e.prototype.flush=function(){var e=this;return this._writer.close().then((function(){return e._flushPromise}))},e}()}}]);